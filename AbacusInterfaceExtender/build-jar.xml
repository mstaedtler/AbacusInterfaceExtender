<project name="AbacusInterfaceExtender" default="default" basedir="."
  xmlns:fx="javafx:com.sun.javafx.tools.ant">
 
  <property name="JAVA_HOME" value="C:\\Program Files\\Java\\jdk1.8.0_144"/>
  <property name="build.src.dir" value="src"/>
  <property name="build.classes.dir" value="classes"/>
  <property name="build.dist.dir" value="dist"/>

  <path id="CLASSPATH">
  	<pathelement location="lib/log4j-api-2.9.1.jar"/>
	<pathelement location="lib/log4j-core-2.9.1.jar"/>
  	<pathelement location="lib/dom4j-2.1.0.jar"/>
	<pathelement location="lib/poi-3.17.jar"/>
  	<pathelement location="lib/poi-ooxml-3.17.jar"/>
  	<pathelement location="lib/poi-ooxml-schemas-3.17.jar"/>
  	<pathelement location="lib/commons-io-1.4.jar"/>
   	<pathelement location="lib/jasperreports-6.4.1.jar"/>
  	<pathelement location="lib/jasperreports-fonts-6.4.1.jar"/>
  	<pathelement location="lib/commons-lang3-3.6.jar"/>
  	<pathelement location="lib/commons-beanutils-1.9.3.jar"/>
  	<pathelement location="lib/commons-logging-1.2.jar"/>
  	<pathelement location="lib/commons-collections-3.2.2.jar"/>
  	<pathelement location="lib/commons-digester-2.1.jar"/>
  	<pathelement location="lib/slf4j-api-1.5.6.jar"/>
  	<pathelement location="lib/slf4j-jdk14-1.5.6.jar"/>
  	<pathelement location="lib/xmlbeans-2.6.0.jar"/>       	    
	<pathelement path="classes"/>
   </path>	
	
	<target name="default" depends="clean,compile">
	 
	    <taskdef resource="com/sun/javafx/tools/ant/antlib.xml"
	      uri="javafx:com.sun.javafx.tools.ant"
	      classpath="${JAVA_HOME}/lib/ant-javafx.jar"/>
	 
		
		
	      
		<fx:application id="AbacusInterfaceExtender"
	        name="MainScene"
	        mainClass="ch.gruner.dbs.aie.gui.Main"/>
	 
	      <fx:resources id="appRes">
	        <fx:fileset dir="${build.dist.dir}" includes="AbacusInterfaceExtender.jar"/>
	      	<fx:fileset dir="lib"/>
	      	<fx:fileset dir="log"/>
	      	<fx:fileset dir="${build.classes.dir}"/>
	      </fx:resources>
	 
	      <fx:jar destfile="${build.dist.dir}/AbacusInterfaceExtender.jar">
	        <fx:application refid="AbacusInterfaceExtender"/>
	        <fx:resources refid="appRes"/>
	        <fileset dir="${build.classes.dir}"/>
	      </fx:jar>
	 
	      <fx:deploy outdir="." embedJNLP="true"
	        outfile="AbacusInterfaceExtender"
	      	nativeBundles="all">
	 
	        <fx:application refId="AbacusInterfaceExtender"/>
	 
	        <fx:resources refid="appRes"/>
	 
	        <fx:info title="Abacus Interface Extender"
	          vendor="DBS"/>
	 
	      </fx:deploy>
	 
	  </target>
	 
	  <target name="clean">
	    <mkdir dir="${build.classes.dir}"/>
	    <mkdir dir="${build.dist.dir}"/>

	    <delete>
	      <fileset dir="${build.classes.dir}" includes="**/*"/>
	      <fileset dir="${build.dist.dir}" includes="**/*"/>
	    </delete>
	 
	  </target>
	 
	  <target name="compile" depends="clean">
	 
	    <javac includeantruntime="false"
	      srcdir="${build.src.dir}"
	      destdir="${build.classes.dir}"
	      fork="yes"
	      executable="${JAVA_HOME}/bin/javac"
	      source="1.8"
	      debug="on"
	      classpathref="CLASSPATH">
	    </javac>
	  	
	  	<copy todir="${build.classes.dir}">
	  	      <fileset dir="${build.src.dir}">
	  	        <include name="**/*.png" />
	  	        <include name="**/*.fxml" />
	  	        <include name="**/*.css" />
	  	      </fileset>
	  		  <fileset dir="ressources"/>
	  		  <fileset dir="log"/>
	  	</copy>
	  	
	  	<copy todir="${build.classes.dir}/input">
	  		<fileset dir="input"/>
	  	</copy>
	  	
	  	<copy todir="${build.classes.dir}/config">
	  		<fileset dir="config"/>
	  	</copy>
	  	
	  	<copy todir="${build.classes.dir}/output">
	  		<fileset dir="output"/>
	     </copy>
	  	
	  	<copy todir="${build.classes.dir}/lib">
	  		<fileset dir="lib"/>
	  	</copy>
	  
	  </target>
	 
	</project>
	
	
